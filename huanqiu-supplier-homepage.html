<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=5.0000">
	<meta name="page-view-size" content="1280*720">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>供应商 | 环球购物 | 首页</title>
	<link rel="stylesheet" href="css/main.css">
</head>

<body onload="create()" onunload="destroy()">
<!-- [环球购物LOGO]开始 -->
<a class="sup-logo" href="#">
    <img src="img/global-shopping-logo.png" alt="">
</a>
<!-- [环球购物LOGO]结束 -->
<!-- [一级菜单效果]开始 -->
<div class="nav-effect-group">
    <div id="huanqiu-main-menu-effect-01" class="nav-effect-common nav-effect-pos-01">
        <img src="img/huanqiu-main-menu-effect-01.jpg" alt="">
    </div>
    <div id="huanqiu-main-menu-effect-02" class="nav-effect-common nav-effect-pos-02">
        <img src="img/huanqiu-main-menu-effect-02.jpg" alt="">
    </div>
    <div id="huanqiu-main-menu-effect-03" class="nav-effect-common nav-effect-pos-03">
        <img src="img/huanqiu-main-menu-effect-03.jpg" alt="">
    </div>
    <div id="huanqiu-main-menu-effect-04" class="nav-effect-common nav-effect-pos-04">
        <img src="img/huanqiu-main-menu-effect-04.jpg" alt="">
    </div>
    <div id="huanqiu-main-menu-effect-05" class="nav-effect-common nav-effect-pos-05">
        <img src="img/huanqiu-main-menu-effect-05.jpg" alt="">
    </div>
    <div id="huanqiu-main-menu-effect-06" class="nav-effect-common nav-effect-pos-06">
        <img src="img/dongfang-main-menu-effect-06.jpg" alt="">
    </div>
    <!-- [返回键效果]开始 -->
    <div id="supplier-back-effect" class="nav-back-common nav-back-effect-pos">
        <img src="img/supplier-back-effect.jpg" alt="">
    </div>
    <!-- [返回键效果]结束 -->
</div>
<!-- [一级菜单效果]结束 -->
<!-- [一级菜单]开始 -->
<div class="nav-decor"></div>
<table class="nav-items">
    <tr>
        <td><a id="40" href="zhonghua-supplier-detail-page.html"
               onfocus="showUp('huanqiu-main-menu-effect-01')"
               onblur="hideEffect('huanqiu-main-menu-effect-01')">品质厨房</a></td>
        <td><a id="41" href="${base}/product/list?productId=${product.id}&cloumnId=41&page=1&server=${server}"
               onfocus="showUp('huanqiu-main-menu-effect-02')"
               onblur="hideEffect('huanqiu-main-menu-effect-02')">美酒美食</a></td>
        <td><a id="42" href="${base}/product/list?productId=${product.id}&cloumnId=42&page=1&server=${server}"
               onfocus="showUp('huanqiu-main-menu-effect-03')"
               onblur="hideEffect('huanqiu-main-menu-effect-03')">服饰箱包</a></td>
        <td><a id="43" href="${base}/product/list?productId=${product.id}&cloumnId=43&page=1&server=${server}"
               onfocus="showUp('huanqiu-main-menu-effect-04')"
               onblur="hideEffect('huanqiu-main-menu-effect-04')">生活家居</a></td>
        <td><a id="44" href="${base}/product/list?productId=${product.id}&cloumnId=44&page=1&server=${server}"
               onfocus="showUp('huanqiu-main-menu-effect-05')"
               onblur="hideEffect('huanqiu-main-menu-effect-05')">美容配饰</a></td>
        <td></td>
    </tr>
</table>
<!-- [一级菜单]开始 -->
<!-- [返回键]开始 -->
<div class="nav-back"></div>
<a href="${base}/ocn/index/${server}" class="nav-back-txt"
   onfocus="showUp('supplier-back-effect')"
   onblur="hideEffect('supplier-back-effect')">商城首页</a>
<!-- [返回键]结束 -->

<!-- [主要内容]开始 -->
	<div class="supplier-homepage-main">
	<!-- [主要内容大图区]开始 -->
		<!-- [主要内容大图区-标题背景颜色]开始 -->
		<div class="supplier-bigTitle-bgc"></div>
		<!-- [主要内容大图区-标题背景颜色]结束 -->
		<!-- [主要内容大图区-图片]开始 -->
    <div class="orient-item-main" style="width: 575px; left: 352px; top: 125px;">
      <a href="" class="orient-content-imgOrVideo">
				<img src="img/orient-content-middle.jpg" alt="orient-content-middle">
			</a>
			<span>快快拿起电话，拨打400-696-8000</span>
		</div>
		<!-- [主要内容大图区-图片]结束 -->
	<!-- [主要内容大图区]结束 -->

	<!-- [主要内容小图区]开始 -->
		<a href="" class="sup-hpage-item-left-1"><img src="img/orient-content-side-1.jpg" alt="" class="orient-item-smallImg"></a>
		<a href="" class="sup-hpage-item-left-2"><img src="img/orient-content-side-2.jpg" alt="" class="orient-item-smallImg"></a>
		<a href="" class="sup-hpage-item-left-3"><img src="img/orient-content-side-3.jpg" alt="" class="orient-item-smallImg"></a>
		<a href="" class="sup-hpage-item-bottom-1"><img src="img/orient-content-bottom-1.jpg" alt="" class="orient-item-smallImg"></a>
		<a href="" class="sup-hpage-item-bottom-2"><img src="img/orient-content-bottom-2.jpg" alt="" class="orient-item-smallImg"></a>
		<a href="" class="sup-hpage-item-right-3"><img src="img/orient-content-side-3.jpg" alt="" class="orient-item-smallImg"></a>
		<a href="" class="sup-hpage-item-right-2"><img src="img/orient-content-side-2.jpg" alt="" class="orient-item-smallImg"></a>
		<a href="" class="sup-hpage-item-right-1"><img src="img/orient-content-side-1.jpg" alt="" class="orient-item-smallImg"></a>
	</div>	
	<!-- [主要内容小图区]结束 -->
<!-- [主要内容]结束 -->
</body>

<script src="js/js.js"></script>
<script type="text/javascript">
      var mp;
      var status = "";
      var focusindex = 1;
      var focustype = 'label';
      var isPlayerFullscreen = false;
      var logText = "";
      var playerRect;
      var rl;
      var rt;
      var rw;
      var rh;
      var tot = 3; // 节目数
      var modeindex = 1;
      var weburl = window.location.href;
      var len = weburl.lastIndexOf("/");
      len++;
      weburl = weburl.substr(0, len);

      document.onkeydown = grabEvent;
      document.onsystemevent = grabEvent;
      function grabEvent() {
        var val = event.which;
        console.log(val);
        focuscontroller(event);
        if (logText.length > 2048) {
            logText = logText.substring(0,1024);
        }
        switch (val) {
          case 13001://"MSG_MEDIA_URL_VALID"
            logText = "捕获到消息MSG_MEDIA_URL_VALID\n" + logText;
            $('result').innerText = logText;
            mp.play();
            break;
          case 13002://"MSG_MEDIA_URL_INVALID"
            logText = "捕获到消息MSG_MEDIA_URL_INVALID\n" + logText;
            $('result').innerText = logText;
            stop();
            break;
          case 13003://"MSG_MEDIA_PLAY_SUCCESS"
            logText = "捕获到消息MSG_MEDIA_PLAY_SUCCESS\n" + logText;
            $('result').innerText = logText;
            break;
          case 13004://"MSG_MEDIA_PLAY_FAILED"
            logText = "捕获到消息MSG_MEDIA_PLAY_FAILED\n" + logText;
            $('result').innerText = logText;
            break;
          case 13005://"MSG_MEDIA_SETPACE_SUCCESS"
            logText = "捕获到消息MSG_MEDIA_SETPACE_SUCCESS\n" + logText;
            $('result').innerText = logText;
            break;
          case 13006://"MSG_MEDIA_SETPACE_FAILED"
            logText = "捕获到消息MSG_MEDIA_SETPACE_FAILED\n" + logText;
            $('result').innerText = logText;
            break;
          case 13007://"MSG_MEDIA_SEEK_SUCCESS"
            logText = "捕获到消息MSG_MEDIA_SEEK_SUCCESS\n" + logText;
            $('result').innerText = logText;
            break;
          case 13008://"MSG_MEDIA_SEEK_FAILED"
            logText = "捕获到消息MSG_MEDIA_SEEK_FAILED\n" + logText;
            $('result').innerText = logText;
            break;
          case 13009://"MSG_MEDIA_PAUSE_SUCCESS"
            logText = "捕获到消息MSG_MEDIA_PAUSE_SUCCESS\n" + logText;
            $('result').innerText =logText;
            break;
          case 13010://"MSG_MEDIA_PAUSE_FAILED"
            logText = "捕获到消息MSG_MEDIA_PAUSE_FAILED\n" + logText;
            $('result').innerText = logText;
            break;
          case 13011://"MSG_MEDIA_RESUME_SUCCESS"
            logText = "捕获到消息MSG_MEDIA_RESUME_SUCCESS\n" + logText;
            $('result').innerText = logText;
            break;
          case 13012://"MSG_MEDIA_RESUME_FAILED"
            logText = "捕获到消息MSG_MEDIA_RESUME_FAILED\n" + logText;
            $('result').innerText = logText;
            break;
          case 13013://"MSG_MEDIA_STOP_SUCCESS"
            logText = "捕获到消息MSG_MEDIA_STOP_SUCCESS\n" + logText;
            $('result').innerText = logText;
            break;
          case 13014://"MSG_MEDIA_STOP_FAILED"
            logText = "捕获到消息MSG_MEDIA_STOP_FAILED\n" + logText;
            $('result').innerText = logText;
            break;
          case 13050:
            logText = "捕获到消息MSG_VOD_STREAM_START\n" + logText;
            $('result').innerText = logText;
            break;
          case 13051:
            logText = "捕获到消息MSG_VOD_STREAM_END\n" + logText;
            $('result').innerText = logText;
            break;
          case 13052:
            logText = "捕获到消息MSG_VOD_STATE_CHANGE\n" + logText;
            $('result').innerText = logText;
            break;
          case 13053:
            logText = "捕获到消息MSG_VOD_WARNING\n" + logText;
            $('result').innerText = logText;
            break;
        }
      }

      function create() {
        $('focus'+focusindex).style.backgroundColor="#FF00FF";
        $('mode'+modeindex).style.backgroundColor="#FFFF00";
        mp = new MediaPlayer();
        if (typeof(mp) != "object") {
          console.log("Failed to create media player");
          return;
        }

        var id = mp.getPlayerInstanceID();
        var flag = mp.bindPlayerInstance(id);
        if (flag != 0) {
          console.log("Failed to bind player instance");
          return;
        }

        rl = $('player').offsetLeft+5;
        rt = $('player').offsetTop;
        rw = $('player').offsetWidth-10;
        rh = $('player').offsetHeight;
        playerRect = new Rectangle(rl, rt, rw, rh);
        console.log("nily test playerRect left=" + rl + " top=" + rt + " width=" + rw + " height=" + rh);
        enableTrackMode();
        switchto($('focus'+focusindex).htmlFor);
      }

      function destroy() {
        if (status != "") {
          status = "";
          mp.stop();
        }
        delete mp;
      }

      function play() {
        if (status != "") {
          status = "";
          mp.stop();
        }
        var srv = DvbBroadcast.currentDvbService; // DvbService
        var source = "dvb://" + srv.original_network_id
                  + "." + srv.transport_stream_id + "." + srv.service_id;

        //var source = document.getElementById("source").value;
        if (source.length == 0)
          console.log("Error: Invalid media source url!");
        else {
          status = "sourced";
          mp.setMediaSource(source);
        }
      }

    function enableTrackMode(){
        var num=mp.enableTrickMode(true);
        if(num==0){
              var str=num==0?"禁止特技操作成功":"允许特技操作成功";
              $("result").innerText="返回0，"+str;
        }else{
              var str=num==0?"禁止特技操作失败":"允许特技操作失败";
            $("result").innerText="返回其它，"+str;
        }
    }

      function pause() {
        if (status == "playing" || status == "sourced") {
            status = "paused";
            mp.pause();
        }
      }

      function resume() {
        if (status == "paused") {
          status = "playing";
          mp.resume();
        }
      }

      function stop() {
        if (status != "") {
          status = "";
          mp.stop();
        }
      }

      var speed = 1;
      function sf() {
        if (status != "" && status != "sourced" && speed < 32) {
          speed = speed * 2;
          mp.setPace(speed);
        }
      }

      function sb() {
        if (status != "" && status != "sourced" && speed > 1 / 32) {
          speed = speed / 2;
          mp.setPace(speed);
        }
      }

      function seek(t) {
        if (status == "")
          return;

        var pos = mp.getCurrentPlayTime();
        var arr = pos.split(":");
        var h = parseInt(arr[0])*3600;
        var m = parseInt(arr[1])*60;
        var s = parseInt(arr[2]);
        pos = h+m+s;
        if(t==1){
            pos+=30;
        }else{
            pos-=30;
        }
        console.log(pos);
        mp.seek(1, pos);
      }

      function setSpdifMode() {
         var objSelect = $('spdifMode');
         var mode=parseInt(objSelect.value);
         console.log(mode);
         AudioSetting.setOutputSPDIFMode(mode);
      }

      function setChannelMode() {
         var objSelect = $('audioChannelMode');
         var mode=parseInt(objSelect.value);
         console.log(mode);
         AudioSetting.setOutputChannelMode(mode);
      }

      function $(id){
        return document.getElementById(id);
      }

      function switchto(mediaurl) {
        console.log("nily test switchto setVideoDisplayArea playerRect left=" + rl + " top=" + rt + " width=" + rw + " height=" + rh);
        mediaurl = weburl + mediaurl;
        mp.setVideoDisplayArea(playerRect);
        mp.setVideoDisplayMode(0);
        mp.refresh();
        console.log("switchto " + mediaurl);
        if (status != "") {
          status = "";
          mp.stop();
        }
        var source = mediaurl;
        if (source.length == 0)
          console.log("Error: Invalid media source url!");
        else {
          status = "sourced";
          mp.setMediaSource(source);
        }
      }

      function focuscontroller(ev) {
        var val = ev.which;
        console.log("focuscontroller event:"+ val +" focusindex:" + focusindex);
        switch (val) {
            // UP
            case 38:
                if (focustype=='label') {
                    if (focusindex != 1)
                        focusindex--;
                    changeLabelFocus();
                }
            break;
            // DOWN
            case 40:
                if (focustype=='label') {
                    if (focusindex != tot)
                        focusindex++;
                    changeLabelFocus();
                }
            break;
            // LEFT
            case 37:
                //if ($('focus'+focusindex).className)
                console.log(($('focus'+focusindex).className) + "isPlayerFullscreen:" + isPlayerFullscreen);
                if (focustype=='player' && !isPlayerFullscreen)
                    switchFocus('label');
            break;
            // RIGHT
            case 39:
                console.log(($('focus'+focusindex).className) + "isPlayerFullscreen:" + isPlayerFullscreen);
                if (focustype=='label')
                    switchFocus('player');
            break;
            // OK
            case 4097:
            case 13:
                if (focustype=='label') {
                    switchto($('focus'+focusindex).htmlFor);
                } else {
                    if (isPlayerFullscreen) {
                        $('main_container').style.display='';
                        $('player').style.backgroundColor = null;
                        mp.setVideoDisplayArea(playerRect);
                        mp.setVideoDisplayMode(0);
                        mp.refresh();
                        isPlayerFullscreen = false;
                    } else {
                        $('main_container').style.display='none';
                        mp.setVideoDisplayMode(1);
                        mp.refresh();
                        isPlayerFullscreen = true;
                    }
                }
            break;
            //红键|PgUp
            case 2305:
            case 33:
                if (focustype=='player'){
                    seek(0);
                }else{
                    if(modeindex!=1)
                        modeindex--;
                    changeModeFocus();
                }
            break;
            //蓝键|PgDn
            case 2308:
            case 34:
                if (focustype=='player'){
                    seek(1);
                }else{
                    if(modeindex!=3)
                        modeindex++;
                    changeModeFocus();
                }
            break;
            //播放结束
            case 13051:
                if(modeindex==2){
                    switchto($('focus'+focusindex).htmlFor);
                }else if(modeindex==3){
                    if(focusindex < tot){
                        focusindex++;
                        changeLabelFocus();
                        switchto($('focus'+focusindex).htmlFor);
                    }
                }else{
                    //
                }
            break;
            //绿键|暂停或播放
            case 2306:
                if(status == "paused"){
                    resume();
                }else{
                    pause();
                }
            break;
        }
      }

      function switchFocus(clsname) {
        if (clsname=='label') {
            focustype='label';
            changeLabelFocus();
            $('player').style.borderColor ="#ABDCE7";
        } else {
            focustype='player';
            clearLabelFocus();
            $('player').style.borderColor ="#FF00FF";
        }
      }

      function clearLabelFocus() {
          for(i=1;i<=tot;i++) {
            $('focus'+i).style.backgroundColor ="#FFFFFF";
        }
      }

      function changeLabelFocus() {
        for(i=1;i<=tot;i++) {
            console.log('setfocus('+i+') focusindex:' + focusindex);
            if (i==focusindex) {
                $('focus'+i).style.backgroundColor = "#FF00FF";
            } else {
                $('focus'+i).style.backgroundColor = "#FFFFFF";
            }
        }
      }

      function changeModeFocus() {
        for(i=1;i<=3;i++) {
            console.log('setmode('+i+') modeindex:' + modeindex);
            if (i==modeindex) {
                $('mode'+i).style.backgroundColor = "#FFFF00";
            } else {
                $('mode'+i).style.backgroundColor = "rgba(0, 0, 0, 0)";
            }
        }
      }
    </script>
</html>